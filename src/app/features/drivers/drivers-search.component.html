<h2 class="page-title">Buscador de pilotos</h2>
<form nz-form (submit)="$event.preventDefault()" class="form-wrap">
  <div nz-row nzGutter="12">
    <div nz-col [nzXs]="24" [nzSm]="16">
      <label nz-form-item nzFor="searchQuery">Nombre o apellido</label>
      <input
        nz-input
        id="searchQuery"
        [formControl]="searchQuery"
        placeholder="Min. 4 caracteres"
      />
    </div>
    <div nz-col [nzXs]="24" [nzSm]="8" class="year-col">
      <app-year-selector
        [years]="years"
        [selectedYear]="selectedYear.value"
        (yearChange)="selectedYear.setValue($event)"
      />
    </div>
  </div>
</form>

<div class="table-wrap">
  <nz-table
    [nzData]="results()"
    [nzFrontPagination]="true"
    [nzPageSize]="DEFAULT_PAGE_SIZE"
    [nzNoResult]="noResultTpl"
    class="drivers-table"
  >
    <thead>
      <tr>
        <th>Nombre</th>
        <th>Apellido</th>
        <th>Número</th>
        <th>Nacionalidad</th>
        <th>Fecha de Nacimiento</th>
        <th>Wikipedia</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let d of results()">
        <td>{{ d.name }}</td>
        <td>{{ d.surname }}</td>
        <td>{{ d.number || '—' }}</td>
        <td>{{ d.nationality || '—' }}</td>
        <td>{{ d.dateOfBirth ? formatDate(d.dateOfBirth) : '—' }}</td>
        <td>
          <a *ngIf="d.wikipedia" [href]="d.wikipedia" target="_blank" rel="noopener">Ver</a>
          <span *ngIf="!d.wikipedia">—</span>
        </td>
      </tr>
    </tbody>
  </nz-table>
</div>

<ng-template #noResultTpl>
  <app-empty-state [message]="getEmptyMessage()" />
</ng-template>
